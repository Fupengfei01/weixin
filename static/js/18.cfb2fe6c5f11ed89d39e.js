webpackJsonp([18,13],{249:function(t,n,e){var o=e(41),r=e(15)("toStringTag"),i="Arguments"==o(function(){return arguments}()),a=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=a(n=Object(t),r))?e:i?o(n):"Object"==(c=o(n))&&"function"==typeof n.callee?"Arguments":c}},258:function(t,n,e){var o,r,i,a=e(54),c=e(564),f=e(250),s=e(81),u=e(19),l=u.process,d=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,v=0,_={},b="onreadystatechange",m=function(){var t=+this;if(_.hasOwnProperty(t)){var n=_[t];delete _[t],n()}},y=function(t){m.call(t.data)};d&&p||(d=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return _[++v]=function(){c("function"==typeof t?t:Function(t),n)},o(v),v},p=function(t){delete _[t]},"process"==e(41)(l)?o=function(t){l.nextTick(a(m,t,1))}:h?(r=new h,i=r.port2,r.port1.onmessage=y,o=a(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):o=b in s("script")?function(t){f.appendChild(s("script"))[b]=function(){f.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:p}},261:function(t,n,e){var o=e(249),r=e(15)("iterator"),i=e(44);t.exports=e(18).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},496:function(t,n,e){var o=e(3)(e(727),e(540),null,null);t.exports=o.exports},540:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{style:t.mapStyle,attrs:{id:"mybaidumap"}})},staticRenderFns:[]}},553:function(t,n,e){e(92),e(91),t.exports=e(584)},556:function(t,n,e){e(262),e(91),e(92),e(587),t.exports=e(18).Promise},560:function(t,n){t.exports=function(t,n,e,o){if(!(t instanceof n)||void 0!==o&&o in t)throw TypeError(e+": incorrect invocation!");return t}},563:function(t,n,e){var o=e(54),r=e(567),i=e(565),a=e(26),c=e(259),f=e(261),s={},u={},n=t.exports=function(t,n,e,l,d){var p,h,v,_,b=d?function(){return t}:f(t),m=o(e,l,n?2:1),y=0;if("function"!=typeof b)throw TypeError(t+" is not iterable!");if(i(b)){for(p=c(t.length);p>y;y++)if(_=n?m(a(h=t[y])[0],h[1]):m(t[y]),_===s||_===u)return _}else for(v=b.call(t);!(h=v.next()).done;)if(_=r(v,m,h.value,n),_===s||_===u)return _};n.BREAK=s,n.RETURN=u},564:function(t,n){t.exports=function(t,n,e){var o=void 0===e;switch(n.length){case 0:return o?t():t.call(e);case 1:return o?t(n[0]):t.call(e,n[0]);case 2:return o?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return o?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return o?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},565:function(t,n,e){var o=e(44),r=e(15)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},567:function(t,n,e){var o=e(26);t.exports=function(t,n,e,r){try{return r?n(o(e)[0],e[1]):n(e)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},569:function(t,n,e){var o=e(15)("iterator"),r=!1;try{var i=[7][o]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!r)return!1;var e=!1;try{var i=[7],a=i[o]();a.next=function(){return{done:e=!0}},i[o]=function(){return a},t(i)}catch(t){}return e}},573:function(t,n,e){var o=e(19),r=e(258).set,i=o.MutationObserver||o.WebKitMutationObserver,a=o.process,c=o.Promise,f="process"==e(41)(a);t.exports=function(){var t,n,e,s=function(){var o,r;for(f&&(o=a.domain)&&o.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?e():n=void 0,o}}n=void 0,o&&o.enter()};if(f)e=function(){a.nextTick(s)};else if(i){var u=!0,l=document.createTextNode("");new i(s).observe(l,{characterData:!0}),e=function(){l.data=u=!u}}else if(c&&c.resolve){var d=c.resolve();e=function(){d.then(s)}}else e=function(){r.call(o,s)};return function(o){var r={fn:o,next:void 0};n&&(n.next=r),t||(t=r,e()),n=r}}},579:function(t,n,e){var o=e(31);t.exports=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:o(t,r,n[r]);return t}},580:function(t,n,e){"use strict";var o=e(19),r=e(18),i=e(24),a=e(23),c=e(15)("species");t.exports=function(t){var n="function"==typeof r[t]?r[t]:o[t];a&&n&&!n[c]&&i.f(n,c,{configurable:!0,get:function(){return this}})}},581:function(t,n,e){var o=e(26),r=e(79),i=e(15)("species");t.exports=function(t,n){var e,a=o(t).constructor;return void 0===a||void 0==(e=o(a)[i])?n:r(e)}},584:function(t,n,e){var o=e(26),r=e(261);t.exports=e(18).getIterator=function(t){var n=r(t);if("function"!=typeof n)throw TypeError(t+" is not iterable!");return o(n.call(t))}},587:function(t,n,e){"use strict";var o,r,i,a=e(55),c=e(19),f=e(54),s=e(249),u=e(35),l=e(43),d=e(79),p=e(560),h=e(563),v=e(581),_=e(258).set,b=e(573)(),m="Promise",y=c.TypeError,g=c.process,j=c[m],g=c.process,w="process"==s(g),k=function(){},M=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[e(15)("species")]=function(t){t(k,k)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof n}catch(t){}}(),x=function(t,n){return t===n||t===j&&n===i},q=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},P=function(t){return x(j,t)?new $(t):new r(t)},$=r=function(t){var n,e;this.promise=new t(function(t,o){if(void 0!==n||void 0!==e)throw y("Bad Promise constructor");n=t,e=o}),this.resolve=d(n),this.reject=d(e)},z=function(t){try{t()}catch(t){return{error:t}}},B=function(t,n){if(!t._n){t._n=!0;var e=t._c;b(function(){for(var o=t._v,r=1==t._s,i=0,a=function(n){var e,i,a=r?n.ok:n.fail,c=n.resolve,f=n.reject,s=n.domain;try{a?(r||(2==t._h&&S(t),t._h=1),a===!0?e=o:(s&&s.enter(),e=a(o),s&&s.exit()),e===n.promise?f(y("Promise-chain cycle")):(i=q(e))?i.call(e,c,f):c(e)):f(o)}catch(t){f(t)}};e.length>i;)a(e[i++]);t._c=[],t._n=!1,n&&!t._h&&E(t)})}},E=function(t){_.call(c,function(){var n,e,o,r=t._v;if(A(t)&&(n=z(function(){w?g.emit("unhandledRejection",r,t):(e=c.onunhandledrejection)?e({promise:t,reason:r}):(o=c.console)&&o.error&&o.error("Unhandled promise rejection",r)}),t._h=w||A(t)?2:1),t._a=void 0,n)throw n.error})},A=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,o=0;e.length>o;)if(n=e[o++],n.fail||!A(n.promise))return!1;return!0},S=function(t){_.call(c,function(){var n;w?g.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},T=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),B(n,!0))},C=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw y("Promise can't be resolved itself");(n=q(t))?b(function(){var o={_w:e,_d:!1};try{n.call(t,f(C,o,1),f(T,o,1))}catch(t){T.call(o,t)}}):(e._v=t,e._s=1,B(e,!1))}catch(t){T.call({_w:e,_d:!1},t)}}};M||(j=function(t){p(this,j,m,"_h"),d(t),o.call(this);try{t(f(C,this,1),f(T,this,1))}catch(t){T.call(this,t)}},o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},o.prototype=e(579)(j.prototype,{then:function(t,n){var e=P(v(this,j));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=w?g.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&B(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),$=function(){var t=new o;this.promise=t,this.resolve=f(C,t,1),this.reject=f(T,t,1)}),u(u.G+u.W+u.F*!M,{Promise:j}),e(58)(j,m),e(580)(m),i=e(18)[m],u(u.S+u.F*!M,m,{reject:function(t){var n=P(this),e=n.reject;return e(t),n.promise}}),u(u.S+u.F*(a||!M),m,{resolve:function(t){if(t instanceof j&&x(t.constructor,this))return t;var n=P(this),e=n.resolve;return e(t),n.promise}}),u(u.S+u.F*!(M&&e(569)(function(t){j.all(t).catch(k)})),m,{all:function(t){var n=this,e=P(n),o=e.resolve,r=e.reject,i=z(function(){var e=[],i=0,a=1;h(t,!1,function(t){var c=i++,f=!1;e.push(void 0),a++,n.resolve(t).then(function(t){f||(f=!0,e[c]=t,--a||o(e))},r)}),--a||o(e)});return i&&r(i.error),e.promise},race:function(t){var n=this,e=P(n),o=e.reject,r=z(function(){h(t,!1,function(t){n.resolve(t).then(e.resolve,o)})});return r&&o(r.error),e.promise}})},701:function(t,n,e){t.exports={default:e(553),__esModule:!0}},703:function(t,n,e){t.exports={default:e(556),__esModule:!0}},727:function(t,n,e){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(703),i=o(r),a=e(701),c=o(a);n.default={props:{mapHeight:{type:Number,default:600},longitude:{type:Number,default:116.404},latitude:{type:Number,default:39.915},is_jlfb:{type:Boolean},is_jqfb:{type:Boolean},is_zdfb:{type:Boolean}},data:function(){return{mapStyle:{width:"100%",height:this.mapHeight+"px"},data_jlfb:{points:[]},data_jqfb:{points:[]},data_zdfb:{points:[]},marker_jlfb:[],marker_jqfb:[],marker_zdfb:[]}},methods:{backinitposition:function(){this.mybdmap.centerAndZoom(new BMap.Point(this._point_x,this._point_y),16)},createMap:function(){var n=t.data.getUserInfo(),e=n.dept,o=e.location,r=o.split(","),i=void 0,a=void 0;r&&r.length>0&&(i=r[0],a=r[1]);var c=this.$BMap,f=new c.Map("mybaidumap");this.mybdmap=f,this._point_x=i,this._point_y=a,f.centerAndZoom(new c.Point(i,a),18);var s=new c.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]});f.addControl(s),f.enableScrollWheelZoom(),f.addControl(new c.NavigationControl);for(var u=e.xyz,l=u?u.split("|"):new Array,d=[],p=0;p<l.length;p++){var h=l[p]+"",v=h.split(",");d.push(new c.Point(v[0],v[1]))}var _=new c.Polygon(d,{strokeColor:"blue",strokeWeight:3,strokeOpacity:1,fillOpacity:.1});f.addOverlay(_),f.setViewport(d),this.map=f},bindMarkerEvent:function(n,e,o){var r=this,i=t.eventHub;"jlfb"==e?(n.addEventListener("click",function(){i.$emit("doto_show_contact",o),i.$emit("detail_contact",o)}),r.marker_jlfb.push(n),r.marker_jlfb.remDub()):"jqfb"==e?(n.addEventListener("click",function(){i.$emit("doto_show_bjxq",o),i.$emit("detail_bjxq",o)}),r.marker_jqfb.push(n),r.marker_jqfb.remDub()):"zdfb"==e&&(n.addEventListener("click",function(){i.$emit("doto_show_zdfb",o),i.$emit("detail_zhandian",o)}),r.marker_zdfb.push(n),r.marker_zdfb.remDub())},unShowMarker:function(t){var n=this;if("jlfb"==t){var e=!0,o=!1,r=void 0;try{for(var i,a=(0,c.default)(n.marker_jlfb);!(e=(i=a.next()).done);e=!0){var f=i.value;f.hide()}}catch(t){o=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(o)throw r}}}else if("jqfb"==t){var s=!0,u=!1,l=void 0;try{for(var d,p=(0,c.default)(n.marker_jqfb);!(s=(d=p.next()).done);s=!0){var h=d.value;h.hide()}}catch(t){u=!0,l=t}finally{try{!s&&p.return&&p.return()}finally{if(u)throw l}}}else if("zdfb"==t){var v=!0,_=!1,b=void 0;try{for(var m,y=(0,c.default)(n.marker_zdfb);!(v=(m=y.next()).done);v=!0){var g=m.value;g.hide()}}catch(t){_=!0,b=t}finally{try{!v&&y.return&&y.return()}finally{if(_)throw b}}}},addMarker:function(t,n,e,o){function r(t){if(0===t.status){var r=new a.Marker(t.points[0],{icon:new a.Icon(n,new a.Size(21,24))});i.map.addOverlay(r),i.bindMarkerEvent(r,e,o)}}var i=this,a=this.$BMap,c=new a.Convertor,f=[];f.push(t),c.translate(f,3,5,r)},doto_jlfb:function(){var n=this.$BMap,e=this;e.is_jlfb?e.$http.post(t.config.weburl+"api/user/queryUserList.do",{token:t.data.getToken(),type:"backUser",auth:"authed",sortby:"is_online desc, realname asc"}).then(function(t){var o=t.body.data,r=[];o&&o.forEach(function(t,o,i){console.log("创建警力分布"),t.location&&(r=t.location.split(",")),1==t.type?e.addMarker(new n.Point(r[0],r[1]),"./src/img/icon/jingcha.png","jlfb",t):2==t.type?e.addMarker(new n.Point(r[0],r[1]),"./src/img/icon/qungan.png","jlfb",t):e.addMarker(new n.Point(r[0],r[1]),"./src/img/icon/minjing.png","jlfb",t)})},function(t){}):e.unShowMarker("jlfb")},doto_jqfb:function(){var n=this,e=n.$BMap;n.is_jqfb?n.$http.post(t.config.weburl+"api/alert/queryAlert.do",{token:t.data.getToken(),status:0,page:1,pageSize:1e4}).then(function(t){var o=t.body.data,r=[];o&&o.forEach(function(t,o,i){r=t.location.split(","),1==t.type?(console.log(t),console.log("=============="+r),n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingqing1.png","jqfb",t)):2==t.type?(console.log(2),console.log("=============="+r),n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingqing2.png","jqfb",t)):(console.log(3),console.log("=============="+r),n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingqing3.png","jqfb",t))})},function(t){}):n.unShowMarker("jqfb")},doto_zdfb:function(){var n=this,e=this.$BMap;n.is_zdfb?n.$http.get(t.config.weburl+"api/entity/list.do",{params:{token:t.data.getToken()}}).then(function(t){var o=t.body.data,r=[];o&&o.forEach(function(t,o,i){t.location&&(r=t.location.split(","),1==t.type?n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingting1.png","zdfb",t):2==t.type?n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingting2.png","zdfb",t):n.addMarker(new e.Point(r[0],r[1]),"./src/img/icon/jingting3.png","zdfb",t))})},function(t){}):n.unShowMarker("zdfb")},initMap:function(t){this.$BMap=t,this.createMap()},getMapScript:function(){return t.BMap?i.default.resolve(t.BMap):new i.default(function(n,e){t._initBaiduMap=function(){n(t.BMap),t.document.body.removeChild(o),t._initBaiduMap=null};var o=document.createElement("script");t.document.body.appendChild(o),o.src="//api.map.baidu.com/api?v=2.0&ak=pYyi0ezfhpE9Exceq26QAcge&callback=_initBaiduMap"})}},created:function(){var t=this.getMapScript,n=this.initMap;t().then(n)},mounted:function(){var n=this,e=t.eventHub;e.$on("backinitposition",function(){n.backinitposition()}),e.$on("doto_jlfb",n.doto_jlfb),e.$on("doto_jqfb",n.doto_jqfb),e.$on("doto_zdfb",n.doto_zdfb),e.$on("doto_jqlb_refresh",function(){n.doto_jqfb()})},beforeDestroy:function(){var n=t.eventHub,e=this;n.$off("doto_jlfb",this.doto_jlfb),n.$off("doto_jqfb",this.doto_jqfb),n.$off("doto_zdfb",this.doto_zdfb),n.$off("doto_jqlb_refresh",function(){e.doto_jqfb()}),n.$off("backinitposition",function(){e.backinitposition()})}}}).call(n,function(){return this}())}});
//# sourceMappingURL=18.cfb2fe6c5f11ed89d39e.js.map